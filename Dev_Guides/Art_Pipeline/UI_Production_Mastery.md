# ğŸ¨ UI åˆ¶ä½œä»å…¥é—¨åˆ°ç²¾é€šï¼šä»æ‰‹å·¥åŒ äººåˆ°å·¥ä¸šåŒ–ç”Ÿäº§

## ğŸ“š 1. é˜¶æ®µä¸€ï¼šæ‰‹å·¥åŒ äºº (Manual Mastery)
> **ç›®æ ‡**: èƒ½å¤Ÿæ‹¼å‡ºé€‚åº”å„ç§å±å¹•åˆ†è¾¨ç‡ã€å¸ƒå±€æ•´é½çš„ UIã€‚

### 1.1 é”šç‚¹ä¸è½´å¿ƒ (Anchors & Pivots) - æ ¸å¿ƒåŸºæœ¬åŠŸ
*   **é”šç‚¹ (Anchors)**: å†³å®š UI å…ƒç´ çš„**ç›¸å¯¹ä½ç½®**å’Œ**æ‹‰ä¼¸æ–¹å¼**ã€‚
    *   **å››å¶è‰ (The Flower)**: RectTransform é¢æ¿ä¸Šçš„é‚£ä¸ªå›¾å½¢ã€‚
    *   **å…¨å±æ‹‰ä¼¸**: Min(0,0) Max(1,1)ã€‚é€‚ç”¨äºèƒŒæ™¯å›¾ã€å…¨å±é®ç½©ã€‚
    *   **å±…ä¸­å›ºå®š**: Min(0.5,0.5) Max(0.5,0.5)ã€‚é€‚ç”¨äºå¼¹çª—ã€‚
    *   **é è¾¹åœé **: æ¯”å¦‚å³ä¸Šè§’å…³é—­æŒ‰é’®ï¼ŒAnchors è®¾ä¸ºå³ä¸Šï¼ŒPivot ä¹Ÿè®¾ä¸ºå³ä¸Š (1,1)ã€‚
*   **è½´å¿ƒ (Pivot)**: å†³å®š UI å…ƒç´ çš„**æ—‹è½¬ä¸­å¿ƒ**å’Œ**ç¼©æ”¾ä¸­å¿ƒ**ã€‚

### 1.2 è‡ªåŠ¨å¸ƒå±€ç³»ç»Ÿ (Layout System)
*   **Horizontal/Vertical Layout Group**: è‡ªåŠ¨æ’åˆ—å­ç‰©ä½“ã€‚
    *   **Child Controls Size**: å‹¾é€‰åï¼Œå­ç‰©ä½“çš„å¤§å°ç”±çˆ¶ç‰©ä½“æ§åˆ¶ï¼ˆå¦‚ï¼šåˆ—è¡¨é¡¹å®½åº¦è‡ªåŠ¨æ’‘æ»¡ï¼‰ã€‚
    *   **Child Force Expand**: å‹¾é€‰åï¼Œå­ç‰©ä½“ä¼šå¹³åˆ†å¤šä½™ç©ºé—´ã€‚
*   **Content Size Fitter**: æ ¹æ®å†…å®¹è‡ªåŠ¨è°ƒæ•´è‡ªèº«å¤§å°ã€‚
    *   **å¸¸ç”¨ç»„åˆ**: Text ç»„ä»¶æŒ‚ Content Size Fitter (Vertical Fit: Preferred Size)ï¼Œå®ç°æ–‡æœ¬æ¡†éšæ–‡å­—é«˜åº¦è‡ªåŠ¨æ‹‰ä¼¸ã€‚
*   **Layout Element**: è¦†ç›– Layout Group çš„é»˜è®¤è®¾ç½®ã€‚
    *   **Min Width**: æœ€å°å®½åº¦ï¼Œé˜²æ­¢è¢«å‹æ‰ã€‚
    *   **Preferred Width**: æœŸæœ›å®½åº¦ã€‚
    *   **Flexible Width**: æƒé‡ã€‚è®¾ä¸º 1 è¡¨ç¤ºå‚ä¸ç“œåˆ†å‰©ä½™ç©ºé—´ã€‚
*   **âš ï¸ æ€§èƒ½é™·é˜± (Performance Pitfalls)**:
    *   **åµŒå¥—åœ°ç‹±**: `Layout Group` åµŒå¥—è¶Šæ·±ï¼Œé‡å»ºå¼€é”€å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚
    *   **Dirty Flags**: ä»»ä½•å­ç‰©ä½“çš„å˜åŒ–ï¼ˆå¦‚ `SetActive`ï¼‰éƒ½ä¼šæ ‡è®°çˆ¶çº§ Layout ä¸º Dirtyï¼Œå¯¼è‡´ä¸‹ä¸€å¸§å¼ºåˆ¶ Rebuildã€‚
    *   **æœ€ä½³å®è·µ**:
        *   **Build & Disable**: å¦‚æœåˆ—è¡¨æ˜¯é™æ€çš„ï¼ˆå¦‚è®¾ç½®é¢æ¿ï¼‰ï¼Œåœ¨ `Start()` æ’åˆ—å¥½åï¼Œç«‹å³ç¦ç”¨ `LayoutGroup` ç»„ä»¶ã€‚
        *   **é¿å… Animator**: ä¸è¦ç”¨ Animator é©±åŠ¨ Layout å…ƒç´ çš„å¤§å°å˜åŒ–ï¼Œè¿™ä¼šæ¯å¸§è§¦å‘ Rebuildã€‚

### 1.3 ä¹å®«æ ¼ (9-Slice)
*   **åŸç†**: ä¿æŒå››ä¸ªè§’ä¸å˜å½¢ï¼Œåªæ‹‰ä¼¸ä¸­é—´åŒºåŸŸã€‚
*   **è®¾ç½®**: åœ¨ Sprite Editor ä¸­æ‹–åŠ¨ç»¿çº¿ã€‚
*   **åº”ç”¨**: æŒ‰é’®èƒŒæ™¯ã€é€šç”¨å¼¹çª—åº•æ¿ã€‚

### 1.4 å±å¹•é€‚é… (Screen Adaptation) - æå®šåˆ˜æµ·å±ä¸æŠ˜å å±
*   **Canvas Scaler**: å±å¹•é€‚é…çš„æ€»æŒ‡æŒ¥ã€‚
    *   **UI Scale Mode**: æ°¸è¿œé€‰ `Scale With Screen Size`ã€‚
    *   **Reference Resolution**: è®¾ä¸ºç¾æœ¯å‡ºå›¾çš„æ ‡å‡†å°ºå¯¸ï¼ˆå¦‚ 1920x1080ï¼‰ã€‚
    *   **Match Mode**:
        *   **Match Width Or Height**: å…³é”®å‚æ•°ã€‚
        *   **æ¨ªå±æ¸¸æˆ (Landscape)**: æ¨è **Match = 1 (Height)** æˆ– **0.5**ã€‚
            *   *Match Height (1)*: ä¿è¯ UI å…ƒç´ åœ¨å‚ç›´æ–¹å‘ä¸Šå æ¯”ä¸å˜ã€‚å®½å±æ‰‹æœºï¼ˆå¦‚ iPhone 15ï¼‰ä¼šçœ‹åˆ°æ›´å®½çš„è§†é‡ï¼ŒUI ä¸ä¼šå˜å°ã€‚
            *   *Match Width (0)*: å¯èƒ½ä¼šå¯¼è‡´å®½å±æ‰‹æœºä¸Š UI å˜å¾—å·¨å¤§ï¼Œé®æŒ¡è§†é‡ã€‚
*   **å®‰å…¨åŒº (Safe Area)**:
    *   **ç—›ç‚¹**: åˆ˜æµ·å±ã€çµåŠ¨å²›ã€åœ†è§’å±å¹•é®æŒ¡ UIã€‚
    *   **è§£å†³**: ç¼–å†™ `SafeArea` è„šæœ¬ã€‚
        *   åœ¨è¿è¡Œæ—¶è·å– `Screen.safeArea`ã€‚
        *   å°† UI æ ¹èŠ‚ç‚¹çš„ `AnchorMin` å’Œ `AnchorMax` è®¾ç½®ä¸ºå®‰å…¨åŒºæ¯”ä¾‹ã€‚
        *   **æ³¨æ„**: èƒŒæ™¯å›¾ä¸è¦æŒ‚ SafeAreaï¼Œè®©å®ƒé“ºæ»¡å…¨å±ï¼›åªæœ‰æŒ‰é’®å’Œæ–‡å­—éœ€è¦æŒ‚ã€‚
*   **Aspect Ratio Fitter**:
    *   **ç”¨é€”**: å¼ºåˆ¶ä¿æŒå®½é«˜æ¯”ã€‚
    *   **åœºæ™¯**: å°åœ°å›¾ï¼ˆå¿…é¡»æ˜¯æ­£åœ†ï¼‰ã€å¡ç‰Œç«‹ç»˜ï¼ˆå¿…é¡»æ˜¯ 3:4ï¼‰ã€å¤´åƒæ¡†ã€‚

---

## ğŸš€ 2. é˜¶æ®µäºŒï¼šæ€§èƒ½ä¼˜åŒ– (Optimization)
> **ç›®æ ‡**: å‡å°‘ Draw Callï¼Œé™ä½ CPU/GPU æ¶ˆè€—ï¼Œæ¶ˆé™¤å¡é¡¿ã€‚

### 2.1 åŠ¨é™åˆ†ç¦» (Canvas Splitting)
*   **åŸç†**: å½“ Canvas ä¸‹ä»»ä½•ä¸€ä¸ªå…ƒç´ å‘ç”Ÿå˜åŒ–ï¼ˆä½ç§»ã€é¢œè‰²ã€æ–‡å­—æ”¹å˜ï¼‰ï¼Œæ•´ä¸ª Canvas éƒ½ä¼šè§¦å‘ Re-batchï¼ˆé‡æ–°æ„å»ºç½‘æ ¼ï¼‰ã€‚
*   **å®è·µ**:
    *   **Static Canvas**: èƒŒæ™¯å›¾ã€è¾¹æ¡†ã€æ ‡é¢˜ã€‚å‡ ä¹ä¸åŠ¨çš„å…ƒç´ ã€‚
    *   **Dynamic Canvas**: è¡€æ¡ã€ä¼¤å®³æ•°å­—ã€å€’è®¡æ—¶ã€‚æ¯å¸§éƒ½åœ¨å˜çš„å…ƒç´ ã€‚
    *   **ä¸è¦åµŒå¥—**: å°½é‡é¿å… Canvas åµŒå¥— Canvasï¼Œè¿™ä¼šå¢åŠ å±‚çº§ç®¡ç†çš„å¤æ‚åº¦ã€‚

### 2.2 å°„çº¿æ£€æµ‹ (Raycast Target)
*   **éšå½¢æ€æ‰‹**: æ¯ä¸€ä¸ªå‹¾é€‰äº† `Raycast Target` çš„ UI å…ƒç´ ï¼ˆImage, Textï¼‰éƒ½ä¼šå‚ä¸ç‚¹å‡»æ£€æµ‹è¿ç®—ã€‚
*   **ä¼˜åŒ–**:
    *   **é»˜è®¤å…³é—­**: åªæœ‰æŒ‰é’®ã€æ»‘åŠ¨æ¡ç­‰éœ€è¦äº¤äº’çš„å…ƒç´ æ‰å‹¾é€‰ã€‚
    *   **çº¯å±•ç¤ºå›¾ç‰‡/æ–‡å­—**: åŠ¡å¿…å–æ¶ˆå‹¾é€‰ã€‚
    *   **Debug å·¥å…·**: ä½¿ç”¨ Unity UI Profiler æˆ– Scene è§†å›¾çš„ "Overdraw" æ¨¡å¼æ£€æŸ¥ã€‚

### 2.3 å›¾é›† (Sprite Atlas)
*   **åŸç†**: å°†å¤šå¼ å°å›¾åˆå¹¶æˆä¸€å¼ å¤§å›¾ï¼Œä¸€æ¬¡æ€§æäº¤ç»™ GPUï¼Œå®ç° 1 ä¸ª Draw Call æ¸²æŸ“å¤šä¸ªå…ƒç´ ã€‚
*   **ç­–ç•¥**:
    *   **æŒ‰åŠŸèƒ½åˆ†**: `CommonAtlas` (é€šç”¨æŒ‰é’®ã€è¾¹æ¡†), `IconAtlas` (æŠ€èƒ½å›¾æ ‡), `MainUIAtlas` (ä¸»ç•Œé¢ç‹¬æœ‰)ã€‚
    *   **é¿å…äº¤å‰å¼•ç”¨**: å¦‚æœä¸€ä¸ªç•Œé¢åŒæ—¶å¼•ç”¨äº† 5 ä¸ªå›¾é›†ï¼Œå°±ä¼šäº§ç”Ÿè‡³å°‘ 5 ä¸ª Draw Callã€‚

### 2.4 åˆ—è¡¨ä¼˜åŒ– (LoopListView)
*   **ç—›ç‚¹**: èƒŒåŒ…é‡Œæœ‰ 1000 ä¸ªæ ¼å­ï¼Œå¦‚æœå®ä¾‹åŒ– 1000 ä¸ª GameObjectï¼Œæ‰“å¼€ç•Œé¢ä¼šå¡æ­»ã€‚
*   **è§£å†³**: **æ— é™å¾ªç¯åˆ—è¡¨ (Object Pooling)**ã€‚
    *   åªå®ä¾‹åŒ–å±å¹•å†…å¯è§çš„ï¼ˆä¾‹å¦‚ 20 ä¸ªï¼‰æ ¼å­ã€‚
    *   æ»‘åŠ¨æ—¶ï¼Œå°†ç§»å‡ºå±å¹•çš„æ ¼å­å›æ”¶ï¼Œæ”¾åˆ°å¦ä¸€ç«¯ï¼Œå¹¶æ›´æ–°æ•°æ®ã€‚
    *   **æ’ä»¶æ¨è**: `EnhancedScroller` æˆ– `LoopScrollRect`ã€‚
    *   **æ ¸å¿ƒæœºåˆ¶**:
        *   **View Item vs Data Item**: åªæœ‰ 20 ä¸ª View Item (GameObject)ï¼Œä½†æœ‰ 1000 ä¸ª Data Item (C# Class)ã€‚
        *   **Recycle Bin**: ç§»å‡ºå±å¹•çš„ Item ä¸ä¼šè¢« Destroyï¼Œè€Œæ˜¯è¿›å…¥å›æ”¶æ± ã€‚
        *   **Data Binding**: å½“ Item ä»å›æ”¶æ± å–å‡ºæ”¾åˆ°å¦ä¸€ç«¯æ—¶ï¼Œå¿…é¡»é‡æ–°ç»‘å®šæ•°æ®ã€‚
        ```csharp
        // ç¤ºä¾‹: LoopListView çš„æ•°æ®ç»‘å®šå›è°ƒ
        LoopListViewItem2 OnGetItemByIndex(LoopListView2 listView, int index)
        {
            if (index < 0 || index >= totalDataCount) return null;

            // 1. ä»æ± ä¸­è·å– (GetFromPool)
            LoopListViewItem2 item = listView.NewListViewItem("ItemPrefabName");
            
            // 2. è·å–æ•°æ® (GetData)
            var data = allInventoryData[index];
            
            // 3. ç»‘å®šæ•°æ® (BindData)
            var viewScript = item.GetComponent<InventoryItemView>();
            viewScript.SetIcon(data.icon);
            viewScript.SetCount(data.count);
            
            // 4. é‡ç½®çŠ¶æ€ (Reset State) - å…³é”®ï¼
            // å› ä¸ºè¿™ä¸ª item å¯èƒ½æ˜¯å¤ç”¨çš„ï¼Œå®ƒä¹‹å‰å¯èƒ½å¤„äº "é€‰ä¸­" çŠ¶æ€
            viewScript.SetSelected(data.isSelected); 
            
            return item;
        }
        ```

---

## ğŸ¤– 3. é˜¶æ®µä¸‰ï¼šè‡ªåŠ¨åŒ–ä¸å·¥ä¸šåŒ– (Automation)
> **ç›®æ ‡**: è®©æœºå™¨å†™ä»£ç ï¼Œè®©ç¾æœ¯ç›´æ¥å‡ºç•Œé¢ã€‚

### 3.1 ä»£ç ç”Ÿæˆ (UI Code Gen)
*   **æ‹’ç» Find**: `transform.Find("Bg/Button")` æ˜¯è„†å¼±ä¸”ä½æ•ˆçš„ã€‚
*   **è‡ªåŠ¨ç»‘å®š**:
    1.  çº¦å®šå‘½åè§„èŒƒï¼ˆå¦‚ `btn_Close`, `txt_Title`ï¼‰ã€‚
    2.  ç¼–å†™ç¼–è¾‘å™¨è„šæœ¬ï¼Œéå† Prefabã€‚
    3.  è‡ªåŠ¨ç”Ÿæˆ `XXView.cs`ï¼ŒåŒ…å« `public Button btn_Close;`ã€‚
    4.  è‡ªåŠ¨æŒ‚è½½è„šæœ¬å¹¶åºåˆ—åŒ–å¼•ç”¨ã€‚

### 3.2 è®¾è®¡ç¨¿ç›´é€šè½¦ (Figma to Unity)
*   **ç—›ç‚¹**: ç¾æœ¯å‡ºå›¾ -> æ‹¼ UI -> ç¨‹åºè°ƒä½ç½® -> ç¾æœ¯éªŒæ”¶ä¸é€šè¿‡ -> åå¤è°ƒæ•´ã€‚
*   **æµç¨‹**:
    1.  ç¾æœ¯åœ¨ Figma ä¸­æŒ‰è§„èŒƒä½œå›¾ï¼ˆä½¿ç”¨ Auto Layoutï¼‰ã€‚
    2.  ä½¿ç”¨æ’ä»¶ (å¦‚ **Doozy UI**, **Nova**, æˆ–å¼€æºçš„ **Figma Converter for Unity**) å¯¼å‡ºã€‚
    3.  Unity ä¸­ä¸€é”®å¯¼å…¥ï¼Œè‡ªåŠ¨ç”Ÿæˆ RectTransform, Image, Textï¼Œç”šè‡³è‡ªåŠ¨åˆ‡å›¾ã€‚
*   **ä»·å€¼**: è¿˜åŸåº¦ 100%ï¼Œç¨‹åºåªéœ€å…³æ³¨é€»è¾‘ã€‚

---

## ğŸ§› 4. å®æˆ˜æ¡ˆä¾‹ï¼šVampirefall
### 4.1 æˆ˜æ–— HUD (Heads-Up Display)
*   **éœ€æ±‚**: å±å¹•ä¸ŠåŒæ—¶å­˜åœ¨ 50+ æ€ªç‰©ï¼Œæ¯ä¸ªéƒ½æœ‰è¡€æ¡ï¼›æ¯ç§’è·³å‡º 100+ ä¼¤å®³æ•°å­—ã€‚
*   **ä¼˜åŒ–æ–¹æ¡ˆ**:
    *   **World Space UI vs Screen Space**: æ€ªç‰©è¡€æ¡ä½¿ç”¨ World Space Canvas è¿˜æ˜¯ 3D Meshï¼Ÿ
        *   **æ–¹æ¡ˆ A**: å°‘é‡æ€ªç‰©ç”¨ World Space Canvasã€‚
        *   **æ–¹æ¡ˆ B (æ¨è)**: å¤§é‡æ€ªç‰©ä½¿ç”¨ **GPU Instancing** æ¸²æŸ“è¡€æ¡é¢ç‰‡ (Mesh)ï¼Œä¸èµ° UGUI ç³»ç»Ÿã€‚
    *   **ä¼¤å®³æ•°å­—**: å¿…é¡»ä½¿ç”¨å¯¹è±¡æ± ã€‚ä½¿ç”¨ `TextMeshPro` çš„æ‰¹å¤„ç†æ¨¡å¼ï¼Œæˆ–è€…è‡ªå®šä¹‰ Mesh ç²’å­ç³»ç»Ÿã€‚

### 4.2 æŠ€èƒ½æ„å»ºç•Œé¢ (Build UI)
*   **éœ€æ±‚**: å¤æ‚çš„æŠ€èƒ½æ ‘ï¼Œè¿çº¿ï¼ŒèŠ‚ç‚¹çŠ¶æ€ï¼ˆå·²è§£é”/æœªè§£é”ï¼‰ã€‚
*   **å®ç°**:
    *   **ScrollRect**: å…è®¸æ‹–æ‹½æŸ¥çœ‹åºå¤§çš„æŠ€èƒ½æ ‘ã€‚
    *   **LineRenderer vs UI Line**: ä½¿ç”¨ `UILineRenderer` (UI Extensions) ç»˜åˆ¶è¿çº¿ï¼Œæ¯” 3D LineRenderer æ›´é€‚åˆ UI å±‚çº§ã€‚
    *   **æ•°æ®é©±åŠ¨**: æŠ€èƒ½æ ‘çš„ç»“æ„å®Œå…¨ç”±é…ç½®è¡¨å†³å®šï¼ŒUI ä»£ç åªè´Ÿè´£æ ¹æ® ID å®ä¾‹åŒ–èŠ‚ç‚¹å¹¶è¿çº¿ã€‚

### 4.3 å¤æ‚æ¡ˆä¾‹ï¼šåŠ¨æ€å¼‚æ­¥å•†åŸ (Dynamic Async Shop)
*   **æŒ‘æˆ˜**:
    *   **ç»“æ„å¤æ‚**: 3 ä¸ªå­æ¨¡å—ï¼ˆçƒ­é”€ã€è£…å¤‡ã€æ¶ˆè€—å“ï¼‰ï¼Œæ¯ä¸ªæ¨¡å—å•†å“æ•°é‡ä¸å®šã€‚
    *   **å¼‚æ­¥åŠ è½½**: å•†å“æ•°æ®ä»æœåŠ¡å™¨æ‹‰å–ï¼Œå›¾æ ‡å¼‚æ­¥ä¸‹è½½ã€‚
    *   **åŠ¨æ€æ˜¾éš**: è´­ä¹°åå•†å“å¯èƒ½æ¶ˆå¤±ï¼Œç”šè‡³æ•´ä¸ªæ¨¡å—æ¶ˆå¤±ã€‚
*   **å¸ƒå±€ç»“æ„ (Hierarchy)**:
    *   `ShopScrollView` (ScrollRect)
        *   `Viewport`
            *   `Content` (Vertical Layout Group + Content Size Fitter)
                *   `Module_Hot` (Vertical Layout Group + Content Size Fitter)
                    *   `Header` (Text)
                    *   `Grid` (Grid Layout Group + Content Size Fitter)
                *   `Module_Equip` (...)
                *   `Module_Consumable` (...)
*   **æ ¸å¿ƒç—›ç‚¹**:
    *   **å¸ƒå±€é”™ä¹± (The Pop)**: å¼‚æ­¥åŠ è½½å›¾ç‰‡æˆ–å®ä¾‹åŒ– Item æ—¶ï¼ŒContent é«˜åº¦æ²¡æœ‰åŠæ—¶åˆ·æ–°ï¼Œå¯¼è‡´æ¨¡å—é‡å æˆ–æ— æ³•æ»‘åŠ¨ã€‚
*   **è§£å†³æ–¹æ¡ˆè¯¦è§£**:
    1.  **Content Size Fitter é“¾ (The Chain)**: å¿…é¡»ç¯ç¯ç›¸æ‰£ï¼Œæ–­ä¸€ç¯åˆ™å…¨å´©ã€‚
        *   **åº•å±‚ (Item)**: å¿…é¡»æœ‰æ˜ç¡®é«˜åº¦ã€‚
            *   æŒ‚ `Layout Element`ï¼Œè®¾ç½® `Min Height` æˆ– `Preferred Height` (ä¾‹å¦‚ 200)ã€‚
            *   æˆ–è€… Item æœ¬èº«å°±æ˜¯å›ºå®šé«˜åº¦çš„ Prefabã€‚
        *   **ä¸­é—´å±‚ (Module/Grid)**: å¿…é¡»èƒ½è¢«å­ç‰©ä½“æ’‘å¤§ã€‚
            *   æŒ‚ `Content Size Fitter`ã€‚
            *   è®¾ç½® `Vertical Fit` = **Preferred Size**ã€‚
            *   **å…³é”®**: è¿™ä¼šè®© Module çš„é«˜åº¦è‡ªåŠ¨ç­‰äºæ‰€æœ‰ Item é«˜åº¦ä¹‹å’Œã€‚
        *   **é¡¶å±‚ (Content)**: å¿…é¡»èƒ½è¢« Module æ’‘å¤§ã€‚
            *   æŒ‚ `Content Size Fitter`ã€‚
            *   è®¾ç½® `Vertical Fit` = **Preferred Size**ã€‚
            *   **å…³é”®**: è¿™ä¼šè®© Content çš„é«˜åº¦ç­‰äºæ‰€æœ‰ Module é«˜åº¦ä¹‹å’Œï¼Œä»è€Œè®© ScrollRect èƒ½å¤Ÿæ»šåŠ¨ã€‚

    2.  **å¼ºåˆ¶åˆ·æ–° (The Force Refresh)**:
        *   **ä¸ºä»€ä¹ˆéœ€è¦?**: Unity UI çš„ Layout è®¡ç®—é€šå¸¸åœ¨å¸§æœ«å°¾è¿›è¡Œã€‚å½“ä½ åœ¨ä¸€å¸§å†… `Instantiate` -> `SetParent` -> `SetActive`ï¼ŒLayout ç³»ç»Ÿè¿˜æ²¡æ¥å¾—åŠè®¡ç®—æ–°é«˜åº¦ï¼ŒScrollRect å°±å¯èƒ½è®¤ä¸º Content è¿˜æ˜¯ 0 é«˜åº¦ã€‚
        *   **æ­£ç¡®ä»£ç **:
        ```csharp
        IEnumerator RefreshShopLayout()
        {
            // 1. ç­‰å¾…å½“å‰å¸§ç»“æŸï¼Œç¡®ä¿æ‰€æœ‰ Instantiate å’Œ SetActive é€»è¾‘å·²æ‰§è¡Œ
            yield return null; 

            // 2. å¼ºåˆ¶ç«‹å³é‡å»º Layout
            // æ³¨æ„ï¼šLayoutRebuilder éœ€è¦ RectTransform å‚æ•°
            // å»ºè®®ä»ä¸‹å¾€ä¸Šåˆ·ï¼Œæˆ–è€…ç›´æ¥åˆ·æœ€é¡¶å±‚çš„ Content (å¼€é”€ç•¥å¤§ä½†æœ€ç¨³)
            LayoutRebuilder.ForceRebuildLayoutImmediate(moduleHotRect);
            LayoutRebuilder.ForceRebuildLayoutImmediate(moduleEquipRect);
            LayoutRebuilder.ForceRebuildLayoutImmediate(rootContentRect);
            
            // 3. (å¯é€‰) å¦‚æœåµŒå¥—ææ·±ï¼Œå¯èƒ½éœ€è¦å†ç­‰ä¸€å¸§
            // yield return new WaitForEndOfFrame();
        }
        ```

    3.  **å¼‚æ­¥åŠ è½½é˜²æŠ– (Anti-Jitter)**:
        *   **é—®é¢˜**: å›¾ç‰‡å¼‚æ­¥ä¸‹è½½å›æ¥å‰ï¼ŒImage ç»„ä»¶å¯èƒ½å¤§å°ä¸º 0ï¼Œå¯¼è‡´ Item é«˜åº¦ä¸º 0ï¼›å›¾ç‰‡å›æ¥å Item çªç„¶å˜å¤§ï¼ŒæŠŠä¸‹é¢çš„æ¨¡å—é¡¶ä¸‹å»ã€‚
        *   **è§£å†³**: åœ¨ Item ä¸ŠæŒ‚ `Layout Element`ï¼Œå¹¶è®¾ç½® `Preferred Height` ä¸ºå›¾ç‰‡çš„ç›®æ ‡é«˜åº¦ï¼ˆå¦‚ 200ï¼‰ã€‚è¿™æ ·å³ä½¿å›¾ç‰‡æ²¡åŠ è½½å‡ºæ¥ï¼Œä½ç½®ä¹Ÿå·²ç»å å¥½äº†ã€‚

## ğŸ”— 5. å‚è€ƒèµ„æ–™
*   ğŸ“º **Unity**: [Optimizing Unity UI](https://learn.unity.com/tutorial/optimizing-unity-ui)
*   ğŸ› ï¸ **GitHub**: [LoopScrollRect](https://github.com/qiankanglai/LoopScrollRect)
*   ğŸ“„ **Blog**: [UGUI æ€§èƒ½ä¼˜åŒ–æ€»ç»“](https://www.uwa4d.com/)
