# ğŸ™ Git æå®¢ç”Ÿå­˜æŒ‡å—ï¼šä»å‘½ä»¤è¡Œåˆ°ç§æœ‰äº‘æ­å»º

> **é¢å‘å¯¹è±¡**: ç¨‹åºå‘˜ (Programmers)ã€‚
> **ç›®æ ‡**: æŒæ¡ Git çš„â€œé»‘é­”æ³•â€ï¼Œå¤„ç†å¤æ‚çš„åˆ†æ”¯ç®¡ç†ã€å†²çªè§£å†³ï¼Œå¹¶å­¦ä¼šæ­å»ºå›¢é˜Ÿçš„ç§æœ‰ä»£ç ä»“åº“ã€‚

## 1. å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥ (The Cheat Sheet)

### 1.1 åŸºç¡€æ“ä½œ
```bash
git init                    # åˆå§‹åŒ–ä»“åº“
git clone <url>             # å…‹éš†è¿œç¨‹ä»“åº“
git status                  # æŸ¥çœ‹å½“å‰çŠ¶æ€ (å¿…ç”¨!)
git add .                   # æ·»åŠ æ‰€æœ‰ä¿®æ”¹åˆ°æš‚å­˜åŒº
git commit -m "feat: xxx"   # æäº¤
git pull                    # æ‹‰å–æ›´æ–° (ç›¸å½“äº fetch + merge)
git push                    # æ¨é€ä¿®æ”¹
```

### 1.2 åˆ†æ”¯æ“ä½œ (Branching)
```bash
git branch                  # åˆ—å‡ºæœ¬åœ°åˆ†æ”¯
git branch -a               # åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ (å«è¿œç¨‹)
git checkout -b feature/A   # åˆ›å»ºå¹¶åˆ‡æ¢åˆ° feature/A åˆ†æ”¯
git checkout develop        # åˆ‡æ¢å› develop
git merge feature/A         # æŠŠ feature/A åˆå¹¶è¿›å½“å‰åˆ†æ”¯
git branch -d feature/A     # åˆ é™¤åˆ†æ”¯
```

### 1.3 åæ‚”è¯ (Undo)
```bash
git checkout -- file.cs     # ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ (è¿˜æ²¡ add)
git reset HEAD file.cs      # æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤å›å·¥ä½œåŒº (add äº†ä½†æ²¡ commit)
git reset --soft HEAD^      # æ’¤é”€æœ€è¿‘ä¸€æ¬¡ commit (ä»£ç ä¿ç•™åœ¨æš‚å­˜åŒº)
git reset --hard HEAD^      # å½»åº•å›é€€åˆ°ä¸Šä¸ªç‰ˆæœ¬ (ä»£ç å…¨éƒ¨ä¸¢å¼ƒï¼Œæ…ç”¨!)
git commit --amend          # ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡ commit çš„æ³¨é‡Š
```

### 1.4 æš‚å­˜ç°åœº (Stash)
å½“ä½ æ­£åœ¨ä¿® Bugï¼Œçªç„¶è€æ¿è®©ä½ åˆ‡åˆ†æ”¯å»æ”¹å¦ä¸€ä¸ªç´§æ€¥ Bugï¼š
```bash
git stash                   # æŠŠå½“å‰æœªæäº¤çš„ä¿®æ”¹â€œè—â€èµ·æ¥
git checkout hotfix/001     # åˆ‡åˆ†æ”¯å»ä¿® Bug...
# ... ä¿®å®Œå›æ¥ ...
git checkout develop
git stash pop               # æŠŠâ€œè—â€èµ·æ¥çš„ä»£ç è¿˜åŸå›æ¥
```

## 2. è¿›é˜¶æŠ€å·§ (Advanced Skills)

### 2.1 Rebase (å˜åŸº) vs Merge
*   **Merge**: ä¿ç•™çœŸå®çš„å†å²è®°å½•ï¼Œä¼šæœ‰ "Merge branch 'xxx'" çš„æäº¤ã€‚é€‚åˆå…¬å…±åˆ†æ”¯åˆå¹¶ã€‚
*   **Rebase**: æŠŠä½ çš„æäº¤â€œæ¥â€åœ¨ç›®æ ‡åˆ†æ”¯çš„æœ€æ–°æäº¤åé¢ã€‚å†å²è®°å½•æ˜¯ä¸€æ¡ç›´çº¿ï¼Œéå¸¸å¹²å‡€ã€‚
    *   `git pull --rebase`: æ‹‰å–ä»£ç æ—¶è‡ªåŠ¨å˜åŸº (æ¨èé…ç½®)ã€‚
    *   `git rebase develop`: åœ¨ feature åˆ†æ”¯ä¸Šï¼ŒæŠŠ develop çš„æœ€æ–°ä»£ç å«åœ¨ä¸‹é¢ã€‚

### 2.2 Cherry-pick (æ‘˜æ¨±æ¡ƒ)
åªæƒ³è¦æŸä¸ªåˆ†æ”¯é‡Œçš„**æŸä¸€æ¬¡**æäº¤ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåˆ†æ”¯ï¼Ÿ
```bash
git log                     # æ‰¾åˆ°é‚£ä¸ª commit çš„ hash (ä¾‹å¦‚ a1b2c3d)
git cherry-pick a1b2c3d     # æŠŠè¿™ä¸ª commit å¤åˆ¶åˆ°å½“å‰åˆ†æ”¯
```

### 2.3 è§£å†³å†²çª (Conflict Resolution)

#### A. æ–‡æœ¬æ–‡ä»¶å†²çª
1.  **å®šä½**: æ‰“å¼€å†²çªæ–‡ä»¶ï¼Œæ‰¾åˆ° `<<<<<<<`, `=======`, `>>>>>>>` æ ‡è®°ã€‚
2.  **ä¿®æ”¹**: å†³å®šä¿ç•™å“ªéƒ¨åˆ†ä»£ç ï¼ˆæˆ–è€…éƒ½ä¿ç•™ï¼‰ï¼Œåˆ é™¤æ ‡è®°ç¬¦å·ã€‚
3.  **æäº¤**: `git add` + `git commit`ã€‚

#### B. äºŒè¿›åˆ¶æ–‡ä»¶å†²çª (Binary Conflict) - **å…³é”®ï¼**
å›¾ç‰‡ã€æ¨¡å‹ã€DLL æ— æ³•åˆå¹¶å†…å®¹ï¼Œå¿…é¡»**äºŒé€‰ä¸€**ã€‚

**å‘½ä»¤è¡Œæ–¹æ¡ˆ**:
*   **ä¿ç•™æˆ‘çš„ (Mine)**: æˆ‘æ”¹äº†å›¾ï¼Œæˆ‘è¦è¦†ç›–æœåŠ¡å™¨çš„ã€‚
    ```bash
    git checkout --ours path/to/image.png
    git add path/to/image.png
    ```
*   **ä¿ç•™ä»–çš„ (Theirs)**: åˆ«äººçš„å›¾æ˜¯å¯¹çš„ï¼Œæˆ‘æ”¾å¼ƒæˆ‘çš„ä¿®æ”¹ã€‚
    ```bash
    git checkout --theirs path/to/image.png
    git add path/to/image.png
    ```
*   æ³¨æ„ï¼šåœ¨ `git merge` æ—¶ï¼Œ`--ours` æ˜¯æŒ‡å½“å‰åˆ†æ”¯ï¼Œ`--theirs` æ˜¯æŒ‡è¦åˆå¹¶è¿›æ¥çš„åˆ†æ”¯ã€‚ä½†åœ¨ `git rebase` æ—¶ï¼Œé€»è¾‘æ˜¯åçš„ï¼åŠ¡å¿…å…ˆå¤‡ä»½ã€‚

**GUI æ–¹æ¡ˆ (Sourcetree / TortoiseGit)**:
1.  åœ¨å†²çªæ–‡ä»¶ä¸Šå³é”®ã€‚
2.  é€‰æ‹© `Resolve using 'Mine'` (ä½¿ç”¨æˆ‘çš„ç‰ˆæœ¬) æˆ– `Resolve using 'Theirs'` (ä½¿ç”¨è¿œç¨‹ç‰ˆæœ¬)ã€‚
3.  å·¥å…·ä¼šè‡ªåŠ¨æ‰§è¡Œä¸Šè¿°å‘½ä»¤å¹¶æ ‡è®°ä¸ºå·²è§£å†³ã€‚

**ç»ˆææ–¹æ¡ˆ: é”å®š (Locking)**
ä¸ºäº†é¿å…äºŒè¿›åˆ¶å†²çªï¼Œæœ€å¥½çš„åŠæ³•æ˜¯**ä¸è¦è®©å†²çªå‘ç”Ÿ**ã€‚
*   ä½¿ç”¨ LFS çš„é”å®šåŠŸèƒ½: `git lfs lock image.png`ã€‚
*   è¿™æ ·å½“ä½ åœ¨ä¿®æ”¹æ—¶ï¼Œåˆ«äººæ— æ³•æ¨é€è¿™ä¸ªæ–‡ä»¶ï¼Œç›´åˆ°ä½  `unlock`ã€‚

## 3. æ­å»ºç§æœ‰ Git æœåŠ¡å™¨ (Self-Hosted Git)

å¯¹äºä¸æƒ³æŠŠä»£ç æ”¾åœ¨ GitHub/Gitee çš„å›¢é˜Ÿï¼Œæ¨èæ­å»º **Gitea** (è½»é‡çº§) æˆ– **GitLab** (åŠŸèƒ½å…¨)ã€‚

### 3.1 æ–¹æ¡ˆ A: Gitea (æ¨èï¼Œæè½»é‡)
é€‚åˆå°å›¢é˜Ÿï¼Œä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æå®šï¼Œå†…å­˜å ç”¨æä½ã€‚

**æ­å»ºæ­¥éª¤ (Windows/Linux)**:
1.  **ä¸‹è½½**: å» [Gitea å®˜ç½‘](https://gitea.io) ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚
2.  **è¿è¡Œ**: ç›´æ¥åŒå‡»è¿è¡Œ (ä¼šå¯åŠ¨ Web æœåŠ¡å™¨ï¼Œé»˜è®¤ç«¯å£ 3000)ã€‚
3.  **é…ç½®**: æµè§ˆå™¨è®¿é—® `localhost:3000`ï¼Œé¦–æ¬¡è¿è¡Œä¼šè¿›å…¥å®‰è£…å‘å¯¼ã€‚
    *   æ•°æ®åº“é€‰ `SQLite3` (æœ€ç®€å•ï¼Œæ— éœ€å®‰è£… MySQL)ã€‚
    *   è®¾ç½®ç®¡ç†å‘˜è´¦å·ã€‚
4.  **å±€åŸŸç½‘è®¿é—®**: ç¡®ä¿é˜²ç«å¢™å¼€æ”¾ 3000 ç«¯å£ã€‚é˜Ÿå‹å¯ä»¥é€šè¿‡ `http://192.168.x.x:3000` è®¿é—®ã€‚

### 3.2 æ–¹æ¡ˆ B: å±€åŸŸç½‘è£¸ä»“åº“ (Bare Repo)
æœ€åŸå§‹çš„æ–¹æ³•ï¼Œä¸éœ€è¦ä»»ä½• Web ç•Œé¢ã€‚

1.  **æœåŠ¡å™¨ç«¯ (æ‰¾å°ç”µè„‘åšä¸»æœº)**:
    ```bash
    mkdir vampirefall.git
    cd vampirefall.git
    git init --bare  # åˆå§‹åŒ–è£¸ä»“åº“ (æ²¡æœ‰å·¥ä½œåŒºï¼Œåªæœ‰æ•°æ®åº“)
    ```
2.  **å…±äº«**: å°† `vampirefall.git` æ–‡ä»¶å¤¹è®¾ç½®ä¸º**ç½‘ç»œå…±äº«æ–‡ä»¶å¤¹** (Windows SMB)ã€‚
3.  **å®¢æˆ·ç«¯**:
    ```bash
    git clone //SERVER_IP/Shared/vampirefall.git
    ```

## 4. Unity é¡¹ç›®çš„ .gitignore (å¿…æŠ„)

```gitignore
# Unity folders
/[Ll]ibrary/
/[Tt]emp/
/[Oo]bj/
/[Bb]uild/
/[Bb]uilds/
/[Ll]ogs/
/[Mm]emoryCaptures/

# Visual Studio / JetBrains
.vs/
.idea/
*.sln
*.csproj
*.unityproj

# OS
.DS_Store
Thumbs.db
```

## 5. LFS é…ç½® (å¤§æ–‡ä»¶å­˜å‚¨)

å¯¹äºå¤§äº 100MB çš„æ–‡ä»¶ (PSD, FBX)ï¼Œå¿…é¡»ç”¨ LFSã€‚

1.  **å®‰è£…**: `git lfs install`
2.  **é…ç½®**:
    ```bash
    git lfs track "*.psd"
    git lfs track "*.fbx"
    git lfs track "*.wav"
    ```
3.  **æäº¤**: è¿™ä¼šç”Ÿæˆä¸€ä¸ª `.gitattributes` æ–‡ä»¶ï¼ŒåŠ¡å¿…æŠŠå®ƒæäº¤ä¸Šå»ã€‚

---

**ä¸€å¥è¯å¿ å‘Š**: 
**æ°¸è¿œä¸è¦åœ¨ä¸»åˆ†æ”¯ (master/develop) ä¸Šç›´æ¥å†™ä»£ç ã€‚**
**Commit æ—©ï¼ŒCommit å‹¤ã€‚**