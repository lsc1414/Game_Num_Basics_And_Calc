# 🥔 土豆兄弟 (Brotato) 数值体系全解 (Numerical Deep Dive)

> **"看起来像简笔画，玩起来像数学题。"**
>
> Brotato 的数值设计是近年来最极其教科书级别的案例。它摒弃了复杂的独立乘区，构建了一套**基于加法修正与边际效益博弈**的数值大厦。

---

## 📚 1. 理论基础 (Theoretical Basis)

### 📐 核心哲学：加法为主，乘法为辅
与 *Diablo* 的指数爆炸不同，Brotato 的伤害公式极其克制：

> **DPS = [Base + (Flat * Ratio)] * (1 + Damage%) * (1 + AttackSpeed%) * (CritMultiplier)**

*   **Flat (固定属性):** 也就是面板上的【近战伤害】、【远程伤害】。
*   **Ratio (加成系数):** 每一把武器不同。小刀可能吃 50% 近战，锤子吃 150%。
*   **Damage% (百分比伤害):** 只有这是一个全局乘区。

### ⚖️ 属性设计：六边形战士的陷阱
Brotato 的精髓在于**负属性 (Negative Stats)**。
*   很多道具是：`+10% 伤害, -3 护甲`。
*   这迫使玩家不仅仅是堆高数值，而是**填补短板**。因为 -3 护甲带来的承伤增加远比 10% 伤害更痛。

---

## 🛠️ 2. 全属性详解与计算 (Stats Breakdown)

### ⚔️ 攻击类 (Offensive)

| 属性名 (Stat) | 核心公式 (Formula) | 软上限 (Soft Cap) | Vampirefall 借鉴点 |
| :--- | :--- | :--- | :--- |
| **近战/远程/属性伤害** | `Flat Damage` | 无 | **核心基石**。不同塔吃不同系数，区分塔的定位。 |
| **伤害 (Damage%)** | `Base * (1 + Dmg%)` | 无 | **万金油**。所有塔通用的加成，投放量最大。 |
| **攻击速度 (Attack Speed)** | `BaseInterval / (1 + AS%)` | +400% (实际上限是帧率) | **攻速阈值**。Vampirefall 要注意塔的攻速上限，太快会穿模或丢失。 |
| **暴击率 (Crit Chance)** | `BaseCrit + FlatCrit` | 100% | **溢出无用**。可以设计“溢出暴击率转化为爆伤”来解决。 |
| **攻击范围 (Range)** | `BaseRange + FlatRange` | 屏幕范围 | **近战塔神技**。给光环类塔极高的收益。 |

### 🛡️ 生存类 (Defensive)

| 属性名 (Stat) | 核心公式 (Formula) | 机制解析 |
| :--- | :--- | :--- |
| **最大生命 (Max HP)** | `Base + Flat` | 最基础的容错率。 |
| **护甲 (Armor)** | `Reduction = Armor / (Armor + 15)` | **经典减伤公式**。15护甲=50%减伤。收益递减极快，堆到 20 左右性价比最高。 |
| **闪避 (Dodge)** | `Cap at 60%` | **硬上限**。为了防止无敌，强制锁死在 60%。Vampirefall 必须锁闪避上限。 |
| **生命再生 (HP Regen)** | `X HP / seconds` | 适合风筝流。 |
| **生命窃取 (Life Steal)** | `Lucky based` | 它是**概率触发**回1血，而不是按伤害百分比吸血！防止高攻武器瞬间满血。 |

### 💰 经济与辅助 (Utility)

| 属性名 (Stat) | 核心公式 (Formula) | 机制解析 |
| :--- | :--- | :--- |
| **收获 (Harvest)** | `WaveEndAmount * (1 + 5%)` | **滚雪球**。每波结束给钱，且这笔钱本身每波增长 5%。越早拿越强。 |
| **幸运 (Luck)** | `DropRarity + CritChance(部分)` | **决定掉落品质**。这是肉鸽里改变命运的属性。 |
| **速度 (Speed)** | `BaseMove * (1 + Spd%)` | 走位躲弹幕。 |

### 🧠 3. 重要计算逻辑案例

#### 案例 A：护甲减伤计算 (Armor Reduction)
> 公式: `DamageTakenMultiplier = 1 / (1 + Armor / 15)`

*   **Armor 0:** 受伤 100%。
*   **Armor 15:** 受伤 50%。(减伤50%)
*   **Armor 30:** 受伤 33%。(减伤66%)
*   **Armor -15:** 受伤 **无穷大 (理论上)**。实际上 Brotato 负护甲公式不同：`1 - (Armor / (Armor - 15))`。
    *   Armor -5: 受伤 `1.33` 倍 (+33%)。
    *   **结论:** 负护甲非常痛，比正护甲收益更高。所以“不要穿负甲”是第一生存法则。

#### 案例 B：攻速收益递减 (Attack Speed Diminishing Return)
Brotato 的攻速是加在分母上的：`Cooldown = Base / (1 + AS%)`。
*   **0% -> 100%:** 冷却减半，输出翻倍。收益 **100%**。
*   **100% -> 200%:** 冷却从 0.5 变 0.33，输出从 2倍 变 3倍。收益只有 **50%**。
*   **结论:** 攻速不要无脑堆，堆到 100% 左右后，找 Damage% 收益更高（乘区互补）。

---

## 🌟 3. Vampirefall 实践应用 (Adaptation)

### 🏗️ 塔防属性映射
我们可以直接照搬 Brotato 的属性给我们的防御塔：

1.  **工程学 (Engineering):**
    *   *Brotato:* 生成炮台。
    *   *Vampirefall:* **召唤系塔**的核心属性。增加召唤物上限或强度。
2.  **范围 (Range):**
    *   *Vampirefall:* 对于 **光环塔 (Aura Tower)**，增加范围等于增加覆盖面积（平方级提升），收益极高。
3.  **收获 (Harvest) -> 贪婪 (Greed):**
    *   *Vampirefall:* 塔防游戏通常靠杀怪赚钱。我们可以设计一个属性叫“贪婪”，增加杀怪金币获取率，或者每波利息。

---

## 🔗 4. 参考资料 (References)
*   🌐 **Brotato Wiki:** 每一个公式的准确来源。
*   📄 **[Numerical Framework Methodology](../Numerical/Numerical_Framework_Methodology.md):** 我们的数值总纲。

---

## 🏎️ 5. 极致配装分析 (Min-Max Strategy Guide)

结合网上的“恶魔流”、“工程师流”攻略，我们分析一下为何这些 Build 能达到性能最大化。

### 📊 1. 属性优先级金字塔 (Stat Priority Pyramid)
为了实现 DPS 最大化，必须按照以下优先级堆属性：

*   **T0 (基石): 收获 (Harvest)** (前 5 波)
    *   *原理:* 复利效应。第 1 波拿 10 点收获，到第 20 波可能滚成 500 金币。
    *   *策略:* 前期甚至可以卖血换收获。
*   **T1 (生存): 护甲 (Armor) & 移速 (Speed)**
    *   *原理:* 活着才有输出。至少把护甲堆到 10+ (40%减伤)，移速堆到 20%+ (能躲 Boss 冲锋)。
*   **T2 (输出 - 乘区 A): 攻速 (AS%)**
    *   *原理:* 攻速不仅增加 DPS，还能增加**击退频率** (生存) 和 **吸血判定频率** (回复)。对于近战尤其重要。
*   **T3 (输出 - 乘区 B): Damage% vs Flat Damage**
    *   *策略:* **缺啥补啥**。
        *   如果你拿了冲锋枪 (Base 3)，必须堆 Flat Ranged Dmg。堆 Dmg% 收益极低。
        *   如果你拿了火箭筒 (Base 80)，Flat 收益低，必须堆 Dmg% 和 爆炸范围。

### 🧪 2. 攻防一体的最大化案例：树枝流 (Stick Build)
树枝 (Stick) 是看似垃圾实则无敌的武器。
*   **特效:** 每多拿一根树枝，额外增加伤害。
*   **Min-Max:**
    1.  **全堆 Flat Melee:** 树枝攻速快，Scaling 尚可。
    2.  **生命窃取 (Life Steal):** 因为攻速极快，吸血效率极高，直接解决了生存问题。
    3.  **放弃范围 (Range):** 树枝自带范围很小，堆范围收益低，不如直接堆移速贴脸打。

### 🔄 3. 性能最大化：伤害溢出控制 (Overkill Management)
*   **攻速流 (SMG):** 没有溢出。每发子弹伤害低，绝不浪费。
*   **单发流 (Sniper):** 严重溢出。一枪打小怪 500 血，小怪只有 50 血 -> 浪费 450 伤害。
*   **优化策略:** 如果你玩高伤流，必须搭配 **[贯穿]** 或 **[爆炸]** 属性，把溢出的伤害传递给后面的怪。

---

## 🌾 6. 收获 (Harvest) 的复利魔法详解

Brotato 的“收获”属性是游戏史上最优雅的经济模型之一。它不仅给你钱，还给你**未来的钱**。

### 🧬 复利公式 (The Formula)

> **EndOfWave: Gain = Harvest_Stat**
>
> **Growth: Harvest_Stat = Harvest_Stat * 1.05 (增加 5%)**

这就是著名的 **5% 复利**。

### 📅 模拟计算表 (Simulation)
假设你在第 1 波拿到了 **20 点收获**。

| 波次 (Wave) | 当前收获值 (Stat) | 本波获得材料 ($$) | 累计获得材料 (Total) |
| :--- | :--- | :--- | :--- |
| **W1** | 20 | 20 | 20 |
| **W5** | 20 * 1.05^4 ≈ 24 | 24 | ~110 |
| **W10** | 20 * 1.05^9 ≈ 31 | 31 | ~250 |
| **W20** | 20 * 1.05^19 ≈ 53 | 53 | ~700 |

**结论:**
一开始的 20 点收获，在 20 波的游戏结束时，总共为你提供了 **700 块钱**（相当于买了 3-4 件红装）。
如果你是在第 19 波拿到这 20 收获，它只值 20 块钱。

### 🧠 策略启示 (Strategic Insight)
1.  **早买早享受:** 前 5 波刷出的“收获”道具是必拿的，哪怕它是白色的。
2.  **后期归零:** 到了第 18-19 波，应该疯狂卖掉加收获的道具（如果能卖钱的话），或者完全不再投资收获，全力转战斗属性。
3.  **Vampirefall 借鉴:** 我们的塔防模式通常有“利息”机制（保留金币吃利息）。Brotato 的设计给了另一种思路：**“属性即利息”**。与其让玩家存钱不花（导致战斗变难），不如让玩家买一种“长线投资塔”或“贪婪词条”，既花了钱（战斗平衡），又满足了投资心理。


