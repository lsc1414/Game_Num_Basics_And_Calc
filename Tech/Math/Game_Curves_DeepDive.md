# ðŸ“ˆ æ¸¸æˆä¸­çš„æ›²çº¿è‰ºæœ¯ (The Art of Curves in Games)

> [!TIP]
> **"God does not build in straight lines."** (ä¸Šå¸ä¸é€ ç›´çº¿) â€” Prometheus
> åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œç›´çº¿é€šå¸¸ä»£è¡¨ç€æœºæ¢°ä¸Žåƒµç¡¬ï¼Œè€Œæ›²çº¿åˆ™èµ‹äºˆäº†ç”Ÿå‘½ã€åŠ¨æ„Ÿä¸Žå¹³è¡¡ã€‚

æœ¬æ–‡æ¡£æ—¨åœ¨ç³»ç»Ÿæ€§åœ°æ¢³ç†æ¸¸æˆå¼€å‘ä¸­æ¶‰åŠçš„å„ç±»â€œæ›²çº¿â€ï¼Œä»Žå¾®è§‚çš„åŠ¨ç”»æ’å€¼åˆ°å®è§‚çš„æ•°å€¼æˆé•¿ã€‚

---

## 1. ðŸŒŠ ç¼“åŠ¨å‡½æ•° (Easing Functions) - èµ‹äºˆè¿åŠ¨ä»¥è´¨æ„Ÿ

æœ€åŸºç¡€çš„æ›²çº¿ï¼Œç”¨äºŽæè¿°ä¸€ä¸ªæ•°å€¼å¦‚ä½•ä»Ž A å˜åŒ–åˆ° Bã€‚

### 1.1 ðŸ“ çº¿æ€§ (Linear) vs ã€°ï¸ éžçº¿æ€§
*   **Linear (`t`)**: åŒ€é€Ÿè¿åŠ¨ã€‚æ„Ÿè§‰æœºæ¢°ã€æ— èŠã€‚
*   **Ease In (`t^2`)**: åŠ é€Ÿã€‚æ¨¡æ‹Ÿé‡åŠ›ä¸‹è½ï¼Œæˆ–è½¦è¾†å¯åŠ¨ã€‚
*   **Ease Out (`1 - (1-t)^2`)**: å‡é€Ÿã€‚æ¨¡æ‹Ÿæ‘©æ“¦åŠ›åœæ­¢ï¼Œæœ€å¸¸ç”¨çš„ UI åŠ¨ç”»æ›²çº¿ã€‚
*   **Ease In Out**: å…ˆåŠ é€ŸåŽå‡é€Ÿã€‚æ¨¡æ‹Ÿç”Ÿç‰©çš„è‡ªç„¶è¿åŠ¨ã€‚

### 1.2 ðŸ§® å¸¸ç”¨å…¬å¼ (Math)
```csharp
public static class Easing {
    // 1. Sine (æ­£å¼¦) - æŸ”å’Œ
    public static float EaseInSine(float t) => 1 - Mathf.Cos((t * Mathf.PI) / 2);
    public static float EaseOutSine(float t) => Mathf.Sin((t * Mathf.PI) / 2);

    // 2. Power Curves (Quad, Cubic, Quart, Quint) - åŠ›åº¦é€’å¢ž
    public static float EaseInQuad(float t) => t * t;
    public static float EaseOutQuad(float t) => 1 - (1 - t) * (1 - t);
    
    public static float EaseInCubic(float t) => t * t * t;
    public static float EaseOutCubic(float t) => 1 - Mathf.Pow(1 - t, 3);
    
    public static float EaseInQuart(float t) => t * t * t * t;
    public static float EaseOutQuart(float t) => 1 - Mathf.Pow(1 - t, 4);

    public static float EaseInQuint(float t) => t * t * t * t * t;
    public static float EaseOutQuint(float t) => 1 - Mathf.Pow(1 - t, 5);

    // 3. Expo (æŒ‡æ•°) - çˆ†å‘
    public static float EaseInExpo(float t) => t == 0 ? 0 : Mathf.Pow(2, 10 * t - 10);
    public static float EaseOutExpo(float t) => t == 1 ? 1 : 1 - Mathf.Pow(2, -10 * t);

    // 4. Circ (åœ†å½¢) - çªç„¶
    public static float EaseInCirc(float t) => 1 - Mathf.Sqrt(1 - Mathf.Pow(t, 2));
    public static float EaseOutCirc(float t) => Mathf.Sqrt(1 - Mathf.Pow(t - 1, 2));

    // 5. Back (å›žå¼¹) - é¢„å¤‡/è¿‡å†²
    public static float EaseInBack(float t) {
        float c1 = 1.70158f; float c3 = c1 + 1;
        return c3 * t * t * t - c1 * t * t;
    }
    public static float EaseOutBack(float t) {
        float c1 = 1.70158f; float c3 = c1 + 1;
        return 1 + c3 * Mathf.Pow(t - 1, 3) + c1 * Mathf.Pow(t - 1, 2);
    }

    // 6. Elastic (å¼¹ç°§) - å¼¹æ€§
    public static float EaseOutElastic(float t) {
        float c4 = (2 * Mathf.PI) / 3;
        return t == 0 ? 0 : t == 1 ? 1 : Mathf.Pow(2, -10 * t) * Mathf.Sin((t * 10 - 0.75f) * c4) + 1;
    }

    // 7. Bounce (å¼¹è·³) - æ’žå‡»
    public static float EaseOutBounce(float t) {
        float n1 = 7.5625f; float d1 = 2.75f;
        if (t < 1 / d1) return n1 * t * t;
        else if (t < 2 / d1) return n1 * (t -= 1.5f / d1) * t + 0.75f;
        else if (t < 2.5f / d1) return n1 * (t -= 2.25f / d1) * t + 0.9375f;
        else return n1 * (t -= 2.625f / d1) * t + 0.984375f;
    }
}
```
---

### 1.4 âš¡ é€ŸæŸ¥è¡¨ (Cheat Sheet) - å“ªç§æƒ…å†µç”¨å“ªç§ï¼Ÿ

| Easing ç±»åž‹ | æ›²çº¿ç¤ºæ„ (Shape) | æ„Ÿè§‰æè¿° (Feel) | å…¸åž‹åº”ç”¨åœºæ™¯ (Use Case) |
| :--- | :--- | :--- | :--- |
| **Sine (æ­£å¼¦)** | `  /` | **æœ€æŸ”å’Œ**ã€‚å˜åŒ–éžå¸¸ç»†å¾®ï¼Œå‡ ä¹Žæ„Ÿè§‰ä¸åˆ°åŠ é€Ÿ/å‡é€Ÿçš„è¿‡ç¨‹ã€‚ | äº‘æœµé£˜åŠ¨ã€å‘¼å¸ç¯ã€èƒŒæ™¯å…ƒç´ çš„ç¼“æ…¢ç§»åŠ¨ã€‚ |
| **Quad (äºŒæ¬¡æ–¹)** | ` _/` | **è‡ªç„¶**ã€‚æœ‰æ˜Žæ˜¾çš„åŠ é€Ÿæˆ–å‡é€Ÿæ„Ÿï¼Œä½†ä¸è¿‡åˆ†ã€‚æœ€å¸¸ç”¨çš„æ ‡å‡†æ›²çº¿ã€‚ | UI çª—å£å¼¹å‡º (Out)ã€è§’è‰²èµ·è·‘ (In)ã€æ™®é€šç‰©ä½“çš„ç§»åŠ¨ã€‚ |
| **Cubic (ä¸‰æ¬¡æ–¹)** | ` __/` | **æœ‰åŠ›**ã€‚æ¯” Quad æ›´å¼ºçƒˆçš„åŠ å‡é€Ÿã€‚ | èµ›è½¦åŠ é€Ÿã€æ›´æœ‰â€œé‡é‡æ„Ÿâ€çš„ UI äº¤äº’ã€‚ |
| **Quart (å››æ¬¡æ–¹)** | `___|` | **å‰§çƒˆ**ã€‚èµ·æ­¥éžå¸¸æ…¢ï¼Œæˆ–è€…åˆ¹è½¦éžå¸¸æ€¥ã€‚ | çˆ†ç‚¸ç¢Žç‰‡é£žå‡º (Out)ã€ç«ç®­å‘å°„ (In)ã€‚ |
| **Quint (äº”æ¬¡æ–¹)** | `   |` | **æžåº¦å‰§çƒˆ**ã€‚å‡ ä¹Žæ˜¯çž¬é—´å®Œæˆå¤§éƒ¨åˆ†ä½ç§»ï¼Œåªåœ¨æœ€åŽä¸€ç‚¹ç‚¹æ—¶é—´é‡Œç¼“æ…¢åˆ°ä½ã€‚ | æžå…¶å¿«é€Ÿçš„è½¬åœºã€é—ªçŽ°æ•ˆæžœã€‚ |
| **Expo (æŒ‡æ•°)** | `   |` | **æœºæ¢°æ„Ÿ**ã€‚åŸºäºŽ 2 çš„å¹‚ã€‚èµ·æ­¥æžæ…¢ï¼Œç„¶åŽçªç„¶çˆ†å‘ã€‚ | ç§‘æŠ€æ„Ÿçš„ UI å±•å¼€ã€ç§‘å¹»é—¨å¼€å¯ã€‚ |
| **Circ (åœ†å½¢)** | ` â•­ ` | **çªç„¶**ã€‚åŸºäºŽåŠåœ†ã€‚åŠ é€Ÿæžå¿«ï¼Œç»™äººä¸€ç§â€œçªç„¶åŠ¨èµ·æ¥â€çš„æ„Ÿè§‰ã€‚ | æŸç§æœºæ¢°è£…ç½®çš„å¡æ‰£ã€æ€¥è½¬å¼¯ã€‚ |
| **Back (å›žå¼¹)** | ` áµ•/` | **é¢„å¤‡åŠ¨ä½œ/è¿‡å†²**ã€‚In: å…ˆå‘åŽé€€ä¸€ç‚¹å†å†²å‡ºåŽ»ï¼›Out: å†²è¿‡å¤´ä¸€ç‚¹å†ç¼©å›žæ¥ã€‚ | å¼ºè°ƒåŠ¨ä½œçš„åŠ›åº¦ã€‚UI æŒ‰é’®ç‚¹å‡» (Out)ã€æ€ªç‰©è“„åŠ›æ”»å‡» (In)ã€‚ |
| **Elastic (å¼¹ç°§)** | ` â† ` | **å¼¹æ€§**ã€‚åƒæ©¡çš®ç­‹ä¸€æ ·æ¥å›žæ‘†åŠ¨ï¼Œå¹…åº¦é€æ¸å‡å°ã€‚ | ç»³ç´¢æŒ‚è½½çš„ç‰©ä½“ã€æžœå†»æ•ˆæžœã€å¡é€šé£Žæ ¼çš„ UI å‡ºçŽ°ã€‚ |
| **Bounce (å¼¹è·³)** | ` /\/` | **æ’žå‡»**ã€‚åƒçš®çƒæŽ‰åœ¨åœ°ä¸Šçš„åå¼¹è½¨è¿¹ã€‚ | ç‰©ä½“è½åœ°ã€èœå•æ¿å­æŽ‰è½ä¸‹æ¥ã€‚ |

**In vs Out vs InOut**:
*   **ðŸš€ In**: ä»Ž 0 åŠ é€Ÿã€‚é€‚åˆâ€œè¿›å…¥è§†é‡Žâ€æˆ–â€œå¼€å§‹è¿åŠ¨â€ã€‚(å¦‚ï¼šç«ç®­å‡ç©º)
*   **ðŸ›‘ Out**: å‡é€Ÿåˆ° 0ã€‚é€‚åˆâ€œåœåœ¨æŸå¤„â€æˆ–â€œè¿›å…¥å¾…æœºâ€ã€‚(å¦‚ï¼šUI å¼¹çª—åœåœ¨å±å¹•ä¸­é—´)
*   **ðŸ”„ InOut**: å…ˆåŠ é€ŸåŽå‡é€Ÿã€‚é€‚åˆâ€œä»Ž A ç§»åŠ¨åˆ° Bâ€ã€‚(å¦‚ï¼šæ‘„åƒæœºè¿é•œ)

---

## 2. âœ’ï¸ è´å¡žå°”æ›²çº¿ (Bezier Curves) - è·¯å¾„ä¸Žè½¨è¿¹

ç”¨äºŽå®šä¹‰å¤æ‚çš„è·¯å¾„ï¼Œå¦‚å¯¼å¼¹è½¨è¿¹ã€èµ›é“å½¢çŠ¶æˆ– UI è¿žçº¿ã€‚

### 2.1 åŽŸç†
è´å¡žå°”æ›²çº¿æœ¬è´¨ä¸Šæ˜¯â€œçº¿æ€§æ’å€¼çš„çº¿æ€§æ’å€¼â€ (Lerp of Lerps)ã€‚
*   **äºŒé˜¶ (Quadratic)**: éœ€è¦ 3 ä¸ªç‚¹ (èµ·ç‚¹ P0, æŽ§åˆ¶ç‚¹ P1, ç»ˆç‚¹ P2)ã€‚
    *   å…ˆåœ¨ P0-P1 é—´ Lerp å‡º Aï¼Œåœ¨ P1-P2 é—´ Lerp å‡º Bã€‚
    *   å†åœ¨ A-B é—´ Lerp å‡ºæœ€ç»ˆç‚¹ã€‚
*   **ä¸‰é˜¶ (Cubic)**: éœ€è¦ 4 ä¸ªç‚¹ã€‚Unity çš„ `AnimationCurve` å†…éƒ¨å°±æ˜¯åˆ†æ®µçš„ä¸‰é˜¶è´å¡žå°”ã€‚

### 2.2 ä»£ç å®žçŽ°
```csharp
// äºŒé˜¶è´å¡žå°”
public static Vector3 GetPoint(Vector3 p0, Vector3 p1, Vector3 p2, float t) {
    t = Mathf.Clamp01(t);
    float oneMinusT = 1f - t;
    return oneMinusT * oneMinusT * p0 + 
           2f * oneMinusT * t * p1 + 
           t * t * p2;
}
```

---

## 3. ðŸ“Š æ•°å€¼æˆé•¿æ›²çº¿ (Gameplay Progression Curves)

ç”¨äºŽ RPG å‡çº§ã€ç»æµŽè†¨èƒ€æˆ–éš¾åº¦æŽ§åˆ¶ã€‚

### 3.1 ðŸš€ å¹‚å‡½æ•° (Power Curve)
$$ y = Base \times x^p $$
*   **åº”ç”¨**: å‡çº§æ‰€éœ€ç»éªŒå€¼ã€‚
*   **ç‰¹ç‚¹**: æ—©æœŸå¹³ç¼“ï¼ŒåŽæœŸé™¡å³­ã€‚è®©çŽ©å®¶å‰æœŸå¿«é€Ÿå‡çº§èŽ·å¾—çˆ½æ„Ÿï¼ŒåŽæœŸå‡çº§å˜æ…¢å»¶é•¿æ¸¸æˆå¯¿å‘½ã€‚

### 3.2 ðŸ›¡ï¸ å¯¹æ•°å‡½æ•° (Logarithmic Curve)
$$ y = C \times \ln(x) $$
*   **åº”ç”¨**: æŠ¤ç”²å‡ä¼¤å…¬å¼ (Diminishing Returns)ã€‚
    *   `DamageReduction = Armor / (Armor + Constant)`
*   **ç‰¹ç‚¹**: æ”¶ç›Šé€’å‡ã€‚é˜²æ­¢çŽ©å®¶å †å å•ä¸€å±žæ€§å¯¼è‡´æ— æ•Œã€‚

### 3.3 ðŸªœ é˜¶æ¢¯å‡½æ•° (Step Function)
*   **åº”ç”¨**: è£…å¤‡è§£é”ã€æŠ€èƒ½è´¨å˜ã€‚
*   **ç‰¹ç‚¹**: åªæœ‰è¾¾åˆ°ç‰¹å®šç­‰çº§ï¼Œèƒ½åŠ›æ‰ä¼šæœ‰è·ƒå‡ã€‚

---

## 4. ðŸŽ® Unity ä¸­çš„ AnimationCurve

Unity å†…ç½®çš„ `AnimationCurve` æ˜¯æžå…¶å¼ºå¤§çš„å·¥å…·ï¼Œä¸ä»…ç”¨äºŽåŠ¨ç”»ï¼Œè¿˜å¯ç”¨äºŽé€»è¾‘é…ç½®ã€‚

### 4.1 ðŸŽ¯ æŠ€å·§ï¼šå½’ä¸€åŒ–é‡‡æ ·
ä¸è¦åœ¨ Curve é‡Œå¡«å…·ä½“æ•°å€¼ (å¦‚ 0 åˆ° 1000 ä¼¤å®³)ã€‚
*   **åšæ³•**: Curve çš„ X å’Œ Y éƒ½ä¿æŒåœ¨ 0-1 åŒºé—´ã€‚
*   **ä»£ç **: `float damage = maxDamage * curve.Evaluate(currentLevel / maxLevel);`
*   **ä¼˜ç‚¹**: ç­–åˆ’è°ƒæ•´æ•°å€¼ä¸Šé™æ—¶ï¼Œä¸éœ€è¦é‡ç”»æ›²çº¿ã€‚

### 4.2 ðŸŽ² æŠ€å·§ï¼šä½œä¸ºæ¦‚çŽ‡åˆ†å¸ƒ
å¯ä»¥ç”¨ Curve æ¥æ¨¡æ‹Ÿéžå‡åŒ€éšæœºåˆ†å¸ƒã€‚
*   **Xè½´**: éšæœºæ•° (0-1)ã€‚
*   **Yè½´**: å®žé™…è¾“å‡ºå€¼ã€‚
*   **å½¢çŠ¶**: å¦‚æžœæ›²çº¿æ˜¯â€œSâ€åž‹ï¼Œé‚£ä¹ˆè¾“å‡ºå€¼ä¼šé›†ä¸­åœ¨ä¸­é—´ï¼›å¦‚æžœæ›²çº¿æ˜¯â€œUâ€åž‹ï¼Œè¾“å‡ºå€¼é›†ä¸­åœ¨ä¸¤ç«¯ã€‚

---

## 5. ðŸ› ï¸ å¡‘å½¢å‡½æ•° (Shaping Functions)

åœ¨ Shader å’Œç¨‹åºåŒ–ç”Ÿæˆä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ›´é«˜çº§çš„æ•°å­¦æ¥â€œé‡å¡‘â€ä¿¡å·ã€‚

### 5.1 ðŸ—ºï¸ Remap (é‡æ˜ å°„)
å°†ä¸€ä¸ªåŒºé—´çš„å€¼æ˜ å°„åˆ°å¦ä¸€ä¸ªåŒºé—´ã€‚
```csharp
float Remap(float value, float from1, float to1, float from2, float to2) {
    return (value - from1) / (to1 - from1) * (to2 - from2) + from2;
}
```

### 5.2 ðŸŒ«ï¸ SmoothStep
æ¯” Lerp æ›´å¹³æ»‘çš„æ’å€¼ï¼Œä¸¤ç«¯æ–œçŽ‡ä¸º 0ã€‚å¸¸ç”¨äºŽåœ°å½¢æ··åˆã€çº¹ç†è¾¹ç¼˜å¤„ç†ã€‚
$$ y = x^2(3 - 2x) $$

### 5.3 ðŸ“ PingPong
è®©æ•°å€¼åœ¨ 0 å’Œ 1 ä¹‹é—´å¾€å¤è¿åŠ¨ã€‚
`Mathf.PingPong(Time.time, 1f)`

---

## 6. ðŸ“š æ‰©å±•é˜…è¯»
*   [The Book of Shaders: Shaping Functions](https://thebookofshaders.com/05/) - å¿…è¯»ï¼Œå›¾å½¢å­¦ä¸­çš„æ›²çº¿åœ£ç»ã€‚
*   [GDC: Math for Game Developers](https://www.youtube.com/watch?v=s7V7K8y8X2c)

<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    }
  };
</script>

